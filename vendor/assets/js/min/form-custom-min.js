function FormCustom(){var e=this;this.init=function(){e.translateValidatePT_BR(),e.customValidate(),e.maskForm(),e.cidadeEstado(),e.boxEvent({object:$("input[data-target-open]"),addClass:"open",removeClass:"close"}),e.boxEvent({object:$("input[data-target-close]"),addClass:"close",removeClass:"open"})},this.boxEvent=function(e){e.object.click(function(a){$(this);$('[data-target="'+$(this).data("target-event")+'"]').removeClass(e.removeClass).addClass(e.addClass)})},this.translateValidatePT_BR=function(){$.extend($.validator.messages,{required:"N&atilde;o pode ficar em branco",remote:"Por favor, corrija este campo",email:"Preencha com um e-mail v&aacute;lido",url:"O campo deve ser uma url v&aacute;lida",complete_url:"O campo deve ser uma url v&aacute;lida",date:"O campo deve ser uma data v&aacute;lida",datePT:"O campo deve ser uma data v&aacute;lida",dateISO:"O campo deve ser uma data v&aacute;lida (ISO)",number:"O campo deve ser um n&uacute;mero v&aacute;lido",digits:"O campo deve ser somente d&iacute;gitos",creditcard:"O campo deve ser um cart&atilde;o de cr&eacute;dito v&aacute;lido",equalTo:"Confirma&ccedil;&atilde;o est&aacute; diferente",accept:"O campo Por favor, forne&ccedil;a um arquivo com uma extens&atilde;o v&aacute;lida",maxlength:$.validator.format("O campo deve ser menor ou igual a {0}"),minlength:$.validator.format("O campo deve ser maior ou igual a {0}"),rangelength:$.validator.format("O campo deve ter entre {0} e {1} caracteres"),range:$.validator.format("Use um valor entre {0} e {1}"),max:$.format("O campo deve ser menor do que {0}"),min:$.format("O campo deve ser maior do que {0}"),maxValue:$.format("O campo deve ser menor ou igual a {0}"),minValue:$.format("O campo deve ser maior ou igual a {0}")})},this.maskForm=function(){$("#field-cpf").mask("999.999.999-99",{onComplete:function(a,t,o,i){e.maskNextElement(o)}}),$("#field-numero").mask("999999",{onComplete:function(a,t,o,i){e.maskNextElement(o)}});var a=function(e){return"(00)00000-0000"};$("#field-telefone").mask(a,{onKeyPress:function(e,a,t,o){$(t).mask("(00)00000-0000",o)},onComplete:function(a,t,o,i){e.maskNextElement(o)}}),$("#field-cep").mask("99999-999",{onComplete:function(e,a,t,o){var i=t.parent();$(".load-input").remove(),i.append('<span class="load-input cep">Buscando cep...</span>'),$.getJSON("https://viacep.com.br/ws/"+e+"/json/",function(a){if(a.erro)$(".load-input").addClass("error").html("cep não encontrado"),$("#field-logradouro").val(""),$("#field-complemento").val(""),$("#field-bairro").val(""),$("#field-estado").val("").change(),$("#field-cidade").val("").change(),$(".busca-loja").html(""),$(".dealership-error ~ label.error").remove(),$('input[name="dealership_ids[]"]').rules("remove");else{var t=a.logradouro,o=a.complemento,i=a.bairro,r=a.uf,n=a.localidade;$("#field-logradouro").val(t),$("#field-complemento").val(o),$("#field-bairro").val(i),$("#field-estado").val(r.toUpperCase()).change(),$("#field-cidade").val(n.toUpperCase()).change(),$(".load-input.cep").remove(),$("#field-numero").focus(),proposta.buscaLoja(e,t,i,n,r)}}).fail(function(){$(".load-input").addClass("error").html("erro ao pesquisar o cep")})},onKeyPress:function(e,a,t,o){e.length<9&&objectExist($(".load-input.cep"))&&$(".load-input.cep").remove()}}).blur(function(e){objectExist($(".load-input.cep"))&&$(".load-input.cep").remove()})},this.maskNextElement=function(e){var a=$("input"),t=parseInt(a.index(e))+1;a.eq(t).focus()},this.customValidate=function(){$.validator.addMethod("cnpj",function(e,a){var t,o,i,r,n,l,s;if(s=1,(e=(e=(e=(e=(e=$.trim(e)).replace("/","")).replace(".","")).replace(".","")).replace("-","")).length<14&&e.length<15)return this.optional(a)||!1;for(r=0;r<e.length-1;r++)if(e.charAt(r)!=e.charAt(r+1)){s=0;break}if(s)return this.optional(a)||!1;for(l=e.length-2,t=e.substring(0,l),o=e.substring(l),i=0,n=l-7,r=l;r>=1;r--)i+=t.charAt(l-r)*n--,n<2&&(n=9);if((i%11<2?0:11-i%11)!=o.charAt(0))return this.optional(a)||!1;for(l+=1,t=e.substring(0,l),i=0,n=l-7,r=l;r>=1;r--)i+=t.charAt(l-r)*n--,n<2&&(n=9);return(i%11<2?0:11-i%11)!=o.charAt(1)?this.optional(a)||!1:this.optional(a)||!0},"Informe um CNPJ válido."),$.validator.addMethod("cpf",function(e,a){for(e=(e=(e=$.trim(e)).replace(".","")).replace(".",""),cpf=e.replace("-","");cpf.length<11;)cpf="0"+cpf;var t=[],o=new Number,r=11;for(i=0;i<11;i++)t[i]=cpf.charAt(i),i<9&&(o+=t[i]*--r);for((x=o%11)<2?t[9]=0:t[9]=11-x,o=0,r=11,y=0;y<10;y++)o+=t[y]*r--;return(x=o%11)<2?t[10]=0:t[10]=11-x,cpf.charAt(9)!=t[9]||cpf.charAt(10)!=t[10]||cpf.match(/^0+$|^1+$|^2+$|^3+$|^4+$|^5+$|^6+$|^7+$|^8+$|^9+$/)?this.optional(a)||!1:this.optional(a)||!0},"Informe um CPF válido."),$.validator.addMethod("dateBR",function(e,a){if(10!=e.length)return this.optional(a)||!1;var t=e,o=t.substr(0,2),i=t.substr(2,1),r=t.substr(3,2),n=t.substr(5,1),l=t.substr(6,4);return 10!=t.length||"/"!=i||"/"!=n||isNaN(o)||isNaN(r)||isNaN(l)||o>31||r>12?this.optional(a)||!1:4!=r&&6!=r&&9!=r&&11!=r||31!=o?2==r&&(o>29||29==o&&l%4!=0)?this.optional(a)||!1:l<1900?this.optional(a)||!1:this.optional(a)||!0:this.optional(a)||!1},"Informe uma data válida"),$.validator.addMethod("datetimeBR",function(e,a){if(16!=e.length)return this.optional(a)||!1;if(" "!=e.substr(10,1))return this.optional(a)||!1;var t=e.split(" ");if(2!=t.length)return this.optional(a)||!1;var o=t[0],i=o.substr(0,2),r=o.substr(2,1),n=o.substr(3,2),l=o.substr(5,1),s=o.substr(6,4);if(10!=o.length||"/"!=r||"/"!=l||isNaN(i)||isNaN(n)||isNaN(s)||i>31||n>12)return this.optional(a)||!1;if((4==n||6==n||9==n||11==n)&&31==i)return this.optional(a)||!1;if(2==n&&(i>29||29==i&&s%4!=0))return this.optional(a)||!1;var d=t[1],c=d.substr(0,2),u=d.substr(2,1),m=d.substr(3,2);return 5!=d.length||isNaN(c)||isNaN(m)||c>23||m>59||":"!=u?this.optional(a)||!1:this.optional(a)||!0},"Informe uma data e uma hora válida"),$.validator.addMethod("timerbr",function(e,a){if(8!=e.length)return!1;var t=e,o=t.substr(0,2),i=t.substr(2,1),r=t.substr(3,2),n=t.substr(5,1),l=t.substr(6,2);return!(8!=t.length||":"!=i||":"!=n||isNaN(o)||isNaN(r)||isNaN(l))&&(o>=0&&o<=23&&r>=0&&r<=59&&l>=0&&l<=59)},"Informe um timer válido."),$.validator.addMethod("telefone",function(e,a){return e=(e=(e=(e=e.replace("(","")).replace(")","")).replace("-","")).replace(" ","").trim(),this.optional(a)||/[0-9]{10}/.test(e)},"Informe um telefone válido."),$.validator.addMethod("celular",function(e,a){e=(e=(e=(e=e.replace("(","")).replace(")","")).replace("-","")).replace(" ","").trim();var t=/11/g.test(e)?11:10;return 11==t?this.optional(a)||/[0-9]{11}/.test(e):10==t?this.optional(a)||/[0-9]{10}/.test(e):this.optional(a)||!0},"Informe um celular válido")},this.cidadeEstado=function(){$.getJSON(URI_ASSETS+"/js/lib/estados-cidades.json",function(e){var a='<option value="">Selecione o Estado</option>';$.each(e,function(e,t){a+='<option value="'+t.sigla.toUpperCase()+'">'+t.nome+"</option>"}),$("#field-estado").html(a),$("#field-estado").change(function(){var a="",t="";a='<option value="">Selecione a Cidade</option>';$("#field-estado option:selected").each(function(){t+=$(this).text()}),$.each(e,function(e,o){o.nome==t&&$.each(o.cidades,function(e,t){a+='<option value="'+t.toUpperCase()+'">'+t+"</option>"})}),$("#field-cidade").html(a)})})}}fn.formCustom=function(){formCustom.init()};var formCustom=new FormCustom;